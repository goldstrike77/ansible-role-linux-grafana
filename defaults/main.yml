---
# General parameters #
grafana_is_install: 'false'
grafana_path: '/data'
grafana_version: '6.4'
grafana_admin_user: 'admin'
grafana_admin_password: 'changeme'
grafana_session_share: false # 6.2+移除了会话共享存储，目前[remote_cache]实际功能未知。
grafana_proxy: false # Whether running behind a HaProxy.

# Listen port #
grafana_port: '3000'

# Redis parameters #
grafana_redis_dept: false # A boolean value, whether installs Redis.
grafana_redis_path: '{{ grafana_path }}' # Specify the Redis data directory.
grafana_redis_requirepass: 'changeme' # Authorization clients password.
grafana_redis_maxmemory: '1' # A memory usage limit to the specified amount in MB.
grafana_redis_hosts: 'localhost' # Redis hosts address.
grafana_redis_port: '6379' # Redis listen port.

# NGinx parameters #
grafana_ngx_dept: false # A boolean value, whether proxy web interface and API traffic using NGinx.
grafana_ngx_block_agents: false # Enables or disables block unsafe User Agents.
grafana_ngx_block_string: false # Enables or disables block includes Exploits / File injections / Spam / SQL injections.
grafana_ngx_compress: false # Enables or disables compression.
grafana_ngx_domain: 'visual.example.com' # Defines domain name.
grafana_ngx_pagespeed: false # Enables or disables pagespeed modules.
grafana_ngx_port_http: '80' # NGinx HTTP listen port.
grafana_ngx_port_https: '443' # NGinx HTTPs listen port.
grafana_ngx_ssl_protocols: 'modern' # intermediate or modern, defines SSL protocol profile.
grafana_ngx_version: 'standard' # extras or standard
grafana_ngx_backend: # Define groups of servers that can be referenced.
  - '127.0.0.1'
grafana_ngx_site: # Define backend traffic context.
  - domain: '{{ grafana_ngx_domain }}'
    type: 'proxy'
    location: '/'
    syntax:
      - 'expires off'
      - 'proxy_buffering off'
      - 'proxy_set_header Host $http_host'
      - 'proxy_set_header X-Real-IP $remote_addr'
      - 'proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for'
    backend_address: '{{ grafana_ngx_backend }}'
    backend_port: '{{ grafana_port }}'
    sticky: 'ip_hash'
    keepalive: '32'

# Server System Variables #
grafana_arg:
  default_theme: 'light' # dark or light
  reporting_enabled: 'false'
  check_for_updates: 'false'

# Datasource #
grafana_ds_arg:
  - name: 'prometheus'
    settings:
      - server: '127.0.0.1'
        port: '19090'

# Plugins #
grafana_plugins:
  - 'grafana-piechart-panel'

# LDAP Authentication #
grafana_ldap_enabled: false # Enable LDAP integration.
grafana_ldap_allow_sign_up: false # Allow sign from LDAP.
grafana_ldap_arg:
  servers:
    host: 127.0.0.1
    port: 389
    use_ssl: false
    start_tls: false
    ssl_skip_verify: true
    bind_dn: 'cn=admin,dc=example,dc=com'
    bind_password: changeme
    search_filter: '(cn=%s)'
    search_base_dns:
      - 'dc=example,dc=com'
    group_search_filter: '(&(objectClass=posixGroup)(memberUid=%s))'
    group_search_base_dns:
      - 'ou=groups,dc=example,dc=com'
    attributes:
      name: givenName
      surname: sn
      username: cn
      member_of: memberOf
      email: email
  group_mappings:
    - name: Main Org.
      id: 1
      groups:
        - group_dn: 'cn=admins,ou=groups,dc=example,dc=com'
          org_role: Admin
        - group_dn: 'cn=editors,ou=groups,dc=example,dc=com'
          org_role: Editor
        - group_dn: '*'
          org_role: Viewer
    - name: Other Org.
      id: 2
      groups:
        - group_dn: 'cn=other,ou=groups,dc=example,dc=com'
          org_role: Viewer

# Dashboard #
grafana_dashboard_arg:
  - category: 'Cloud'
    title:
      - 'Dell_PowerEdge'
      - 'Kubernetes'
      - 'VMware_vSphere_Overview'
  - category: 'Databases'
    title:
      - 'MongoDB_Cluster_Summary'
      - 'MongoDB_InMemory'
      - 'MongoDB_MMAPv1'
      - 'MongoDB_Overview'
      - 'MongoDB_ReplSet'
      - 'MongoDB_RocksDB'
      - 'MongoDB_WiredTiger'
      - 'MySQL_Command_Handler_Counters_Compare'
      - 'MySQL_InnoDB_Compression'
      - 'MySQL_InnoDB_Metrics_Advanced'
      - 'MySQL_InnoDB_Metrics'
      - 'MySQL_MyISAM_Aria_Metrics'
      - 'MySQL_Overview'
      - 'MySQL_Performance_Schema'
      - 'MySQL_Performance_Schema_Wait_Event_Analyses'
      - 'MySQL_Query_Response_Time'
      - 'MySQL_Replication'
      - 'MySQL_Table_Statistics'
      - 'MySQL_User_Statistics'
      - 'PostgreSQL_Overview'
  - category: 'OperatingSystem'
    title:
      - 'Linux_Disk_Performance'
      - 'Linux_Disk_Space'
      - 'Linux_Network_Overview'
      - 'Linux_System_Overview'
      - 'Windows_System_Overview'
  - category: 'Universal'
    title:
      - 'Consul_Overview'
      - 'Cross_Server_Graphs'
      - 'Elasticsearch_Overview'
      - 'Graylog_Overview'
      - 'JMX_Overview'
      - 'Kafka_Overview'
      - 'Kibana_Overview'
      - 'Logstash_Overview'
      - 'Minio_Overview'
      - 'NGinx_Overview'
      - 'PHP-FPM_Overview'
      - 'Prometheus_Overview'
      - 'Redis_Overview'
      - 'Trickster_Overview'
      - 'WebSite_Overview'

# Service Mesh #
environments: 'SIT' # Define the service environment.
#tags: # Define the service custom label.
#  subscription: 'default'
#  owner: 'nobody'
#  department: 'Infrastructure'
#  organization: 'The Company'
#  region: 'IDC01'
exporter_is_install: false # Whether to install prometheus exporter.
consul_public_register: false # Whether register a exporter service with public consul client.
consul_public_exporter_token: '00000000-0000-0000-0000-000000000000' # Public Consul client ACL token.
consul_public_http_port: '8500' # The consul HTTP API port.
consul_public_clients: # List of public consul clients.
  - '127.0.0.1'
